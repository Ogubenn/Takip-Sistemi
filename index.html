<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>Bulancak AtÄ±ksu ArÄ±tma Tesisi</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="config.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/api.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <div class="header-logo">
                <img src="assets/images/logo.jpg" alt="Bulancak Belediyesi" class="logo">
            </div>
            <h1>Bulancak AtÄ±ksu ArÄ±tma Tesisi</h1>
            <h2>GÃ¼nlÃ¼k Kontrol Sistemi</h2>
        </header>

        <main>
            <div class="welcome-box">
                <h3>HoÅŸ Geldiniz</h3>
                <p>Bina kontrolÃ¼ yapmak iÃ§in QR kodunu okutun veya aÅŸaÄŸÄ±dan bina seÃ§in:</p>
                <div class="today-stats" id="todayStats">
                    <p><strong>BugÃ¼nÃ¼n Tarihi:</strong> <span id="todayDate"></span></p>
                    <p><strong>Tamamlanan Kontroller:</strong> <span id="completedCount">0/8</span></p>
                </div>
            </div>

            <div class="building-list">
                <!-- Binalar JavaScript ile yÃ¼klenecek -->
                <div style="text-align: center; padding: 60px 20px;">
                    <div style="width: 60px; height: 60px; border: 5px solid #f3f3f3; border-top: 5px solid #0f2862; border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 20px;"></div>
                    <p style="color: #666; font-size: 16px;">Binalar yÃ¼kleniyor...</p>
                </div>
            </div>
            
            <style>
                @keyframes spin {
                    0% { transform: rotate(0deg); }
                    100% { transform: rotate(360deg); }
                }
            </style>

            <div class="quick-links">
                <a href="gecmis.html" class="quick-link">
                    ğŸ“… GeÃ§miÅŸ KayÄ±tlar
                </a>
                <a href="istatistikler.html" class="quick-link">
                    ğŸ“Š Ä°statistikler
                </a>
                <a href="qr-kodlar.html" class="quick-link">
                    ğŸ“± QR Kodlar
                </a>
            </div>
        </main>

        <footer>
            <p><strong>OÄŸulcan Durkan</strong></p>
            <p>Â© 2025 - AtÄ±ksu ArÄ±tma Tesisi Kontrol Sistemi</p>
            <p style="margin-top: 10px; font-size: 0.75em; opacity: 0.5;">
                <a href="admin-login.html" style="color: inherit; text-decoration: none;">ğŸ”</a>
            </p>
        </footer>
    </div>

    <script src="js/script.js"></script>
    <script>
        // Sayfa yÃ¼klendiÄŸinde
        window.onload = function() {
            // BugÃ¼nÃ¼n tarihini gÃ¶ster
            document.getElementById('todayDate').textContent = formatDate(getTodayDate());
            
            // BugÃ¼nÃ¼n durumunu gÃ¼ncelle
            updateTodayStatus();
            
            // Bina kartlarÄ±na durum gÃ¶stergesi ekle
            updateBuildingCards();
        };

        // BugÃ¼nÃ¼n durumunu gÃ¼ncelle
        function updateTodayStatus() {
            const status = getTodayStatus();
            const completed = Object.values(status).filter(v => v).length;
            document.getElementById('completedCount').textContent = `${completed}/8`;
        }

        // Bina kartlarÄ±na durum gÃ¶stergesi ekle
        function updateBuildingCards() {
            const status = getTodayStatus();
            const buildings = {
                giris: 'GiriÅŸ BinasÄ±',
                kum_yag: 'Kum ve YaÄŸ Tutucu',
                idari: 'Ä°dari Bina',
                blower: 'Blower OdasÄ±',
                test1: 'Test Oda 1',
                test2: 'Test Oda 2',
                test3: 'Test Oda 3',
                test4: 'Test Oda 4'
            };

            Object.keys(buildings).forEach((buildingId, index) => {
                const card = document.querySelectorAll('.building-card')[index];
                if (card) {
                    // Durum rozetini ekle
                    const existingBadge = card.querySelector('.status-badge');
                    if (existingBadge) existingBadge.remove();

                    const badge = document.createElement('div');
                    badge.className = 'status-badge';
                    
                    if (status[buildingId]) {
                        badge.classList.add('completed');
                        badge.innerHTML = 'âœ“ TamamlandÄ±';
                        card.style.opacity = '0.8';
                    } else {
                        badge.classList.add('pending');
                        badge.innerHTML = 'â³ Bekliyor';
                    }
                    
                    card.insertBefore(badge, card.firstChild);
                }
            });
        }
    </script>
</body>
</html>
